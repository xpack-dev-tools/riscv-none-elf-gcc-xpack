---

# DO NOT EDIT!
# Automatically generated from xbb-helper/templates/docusaurus/common.

title: Information for xPack GNU RISC-V Embedded GCC developers

date: 2024-11-12 20:33:00 +0300

---

import CodeBlock from '@theme/CodeBlock';

import customField from '@site/src/libs/customField';

import PlatformNativeSection from './_common/_platform-native-section.mdx'
import PlatformDockerSection from './_common/_platform-docker-section.mdx'
import OtherRepositories from './_other-repositories.mdx';
import ManualTests from './_manual-tests.mdx'

{/* ------------------------------------------------------------------------ */}

[![license](https://img.shields.io/github/license/xpack-dev-tools/riscv-none-elf-gcc-xpack)](https://github.com/xpack-dev-tools/riscv-none-elf-gcc-xpack/blob/xpack/LICENSE)

This page is intended for those who want to build the
**xPack GNU RISC-V Embedded GCC**
binaries themselves.

## The xPack Build Box

The build scripts in this project use the **xPack Build Box** (**XBB**)
tools, which require the usual native development tools
(packed as a Docker image for GNU/Linux builds), complemented with
several binary xPacks, installed with `xpm` as development dependencies.

For those interested in understanding how things work, a good starting point
would be to read the [XBB](https://xpack.github.io/xbb/) page.

:::caution

The XBB tools are intended for building standalone relocatable distributions,
thus are quite complex and perform several post-processing steps to
adjust RPATH and validate the resulting binaries.

For the traditional `configure && make install` builds specific to Linux,
these scripts are probably too complicated and therefore are not recommended
for inexperienced users.

:::

## Prerequisites

The build scripts run on GNU/Linux and macOS. The Windows binaries are
generated on Intel GNU/Linux, using [mingw-w64](https://mingw-w64.org).

For details on installing the prerequisites, please read the
[XBB prerequisites page](https://xpack.github.io/xbb/prerequisites/).

## Get project sources

The project is hosted on GitHub:

- https://github.com/xpack-dev-tools/riscv-none-elf-gcc-xpack.git

To clone the stable branch (`xpack`), run the following commands in a
terminal (on Windows use the _Git Bash_ console):

```sh
rm -rf ~/Work/xpack-dev-tools/riscv-none-elf-gcc-xpack.git && \
git clone https://github.com/xpack-dev-tools/riscv-none-elf-gcc-xpack.git \
  ~/Work/xpack-dev-tools/riscv-none-elf-gcc-xpack.git
```

For development purposes, clone the `xpack-develop` branch:

```sh
rm -rf ~/Work/xpack-dev-tools/riscv-none-elf-gcc-xpack.git && \
mkdir -p ~/Work/xpack-dev-tools && \
git clone \
  --branch xpack-develop \
  https://github.com/xpack-dev-tools/riscv-none-elf-gcc-xpack.git \
  ~/Work/xpack-dev-tools/riscv-none-elf-gcc-xpack.git
```

## Get helper sources (optional, for development purposes)

The project has a dependency to a common **helper**, that is
normally installed as a read-only dependency; **for development
purposes**, to be able to make changes to the scripts located in the helper,
clone the `xpack-develop` branch and link it to the central
xPacks store:

```sh
rm -rf ~/Work/xpack-dev-tools/xbb-helper-xpack.git && \
mkdir -p ~/Work/xpack-dev-tools && \
git clone \
  --branch xpack-develop \
  https://github.com/xpack-dev-tools/xbb-helper-xpack.git \
  ~/Work/xpack-dev-tools/xbb-helper-xpack.git && \
xpm link -C ~/Work/xpack-dev-tools/xbb-helper-xpack.git
```

For more details the how a writable helper can be used via
`xpm link`, please see the
[XBB](https://xpack.github.io/xbb/#writable-helper-scripts) documentation.

<OtherRepositories/>

## How to build

The builds require dedicated machines for each platform
(Intel GNU/Linux, Arm 32 GNU/Linux, Arm 64 GNU/Linux,
Intel macOS and Apple Silicon macOS).

### Update the repo

```sh
git -C ~/Work/xpack-dev-tools/riscv-none-elf-gcc-xpack.git pull
```

and, if needed, the helper, when using a writable helper:

```sh
git -C ~/Work/xpack-dev-tools/xbb-helper-xpack.git pull
```

### xPack actions

The following instructions make use of xPack actions, which are a
an extension of npm scripts, i.e. sequences of commands executed
via `xpm run <name>` in an
environment where the PATH is adjusted to include the current project
dependencies.

To see the commands associated with each action, see the `xpack.actions`
definitions in the `package.json` file.

The [xPack C/C++ Managed Build Tools](https://marketplace.visualstudio.com/items?itemName=ilg-vscode.xpack)
Visual Studio Code extension
provides convenient upport to invoke xPack actions from the VS Code.

### macOS builds

<PlatformNativeSection platform="darwin-x64"/>

<PlatformNativeSection platform="darwin-arm64"/>

### GNU/Linux & Windows builds

<PlatformDockerSection platform="linux-x64"/>

<PlatformDockerSection platform="win32-x64"/>

<PlatformDockerSection platform="linux-arm64"/>

<PlatformDockerSection platform="linux-arm"/>

### Debug builds

In some cases it is necessary to run a debug session with the binaries.

For these cases, the build script accepts the `--debug` options.

There are also xPack actions that use this option (`build-develop-debug`
and `docker-build-develop-debug`).

### Files cache

The XBB build scripts use a local cache such that files are downloaded only
during the first run, later runs being able to use the cached files.

However, occasionally some servers may not be available, and the builds
may fail.

The workaround is to manually download the files from alternate
locations (like
https://github.com/xpack-dev-tools/files-cache/tree/master/libs),
place them in the XBB cache (`Work/cache`) and restart the build.

<ManualTests/>
